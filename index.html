<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WAVEBOYS QUIZ</title>
  <style>
    :root{
      --bg:#0b1020;
      --text:#eaf0ff;
      --muted:#a9b4d6;
      --good:#27d17c;
      --bad:#ff4d4d;
      --accent:#7aa7ff;
      --border:rgba(255,255,255,.10);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --gold:#ffd36e;
      --blue:#4fb3ff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 10%, rgba(122,167,255,.18), transparent 60%),
                  radial-gradient(900px 600px at 80% 0%, rgba(39,209,124,.10), transparent 55%),
                  radial-gradient(900px 600px at 80% 100%, rgba(255,77,77,.10), transparent 55%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
    }
    header{
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(10px);
      background: rgba(11,16,32,.70);
      border-bottom: 1px solid var(--border);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:16px}

    .topbar{
      display:grid;
      grid-template-columns: auto 1fr auto;
      align-items:start;
      gap:14px;
    }
    @media (max-width:860px){
      .topbar{grid-template-columns: 1fr;}
      .stats{justify-content:flex-start}
      .titleblock{text-align:left}
    }

    .madeby{
      font-weight:1000;
      letter-spacing:.6px;
      padding:12px 16px;
      font-size:15px;
      border-radius:14px;
      border:1px solid rgba(79,179,255,.35);
      background:
        radial-gradient(220px 80px at 10% 20%, rgba(79,179,255,.22), transparent 60%),
        radial-gradient(220px 80px at 90% 80%, rgba(39,209,124,.16), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.03));
      box-shadow: 0 12px 30px rgba(0,0,0,.45);
      white-space:nowrap;
      position:relative;
      display:flex;
      align-items:center;
      gap:10px;
      text-transform:uppercase;
    }
    .madeby::before{
      content:"‚ú®";
      font-size:16px;
      filter: drop-shadow(0 0 10px rgba(79,179,255,.35));
    }
    .madeby::after{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius:16px;
      background: linear-gradient(90deg, rgba(79,179,255,.55), rgba(39,209,124,.35), rgba(255,77,77,.35));
      opacity:.35;
      z-index:-1;
      filter: blur(10px);
    }

    .titleblock{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width:260px;
      text-align:center;
    }
    h1{margin:0;font-size:20px;line-height:1.2}
    .subtitle{color:var(--muted);font-size:13px}

    .stats{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end;
      min-width:280px;
    }
    .pill{
      display:flex;align-items:center;gap:8px;
      padding:10px 12px;border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-radius:12px;
      box-shadow: var(--shadow);
      font-weight:700;
      white-space:nowrap;
    }
    .dot{width:10px;height:10px;border-radius:999px;display:inline-block}
    .dot.good{background:var(--good)}
    .dot.bad{background:var(--bad)}
    .dot.rem{background:var(--accent)}
    .dot.time{background:var(--blue)}
    .bar{
      width:100%;
      height:12px;
      border-radius:999px;
      overflow:hidden;
      border:1px solid var(--border);
      background: rgba(255,255,255,.05);
      display:flex;
    }
    .seg{height:100%}
    .seg.good{background:var(--good)}
    .seg.bad{background:var(--bad)}
    .seg.rem{background:var(--accent)}

    main .wrap{padding-top:18px;padding-bottom:40px}
    .controls{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;
      margin-bottom:14px;
    }
    button{
      cursor:pointer;
      border:none;
      color:var(--text);
      background: linear-gradient(180deg, rgba(122,167,255,.35), rgba(122,167,255,.15));
      border:1px solid rgba(122,167,255,.35);
      padding:10px 12px;border-radius:12px;
      font-weight:800;
      box-shadow: var(--shadow);
    }
    button:active{transform: translateY(1px)}
    button:disabled{
      opacity:.5;
      cursor:not-allowed;
      filter:saturate(.7);
    }
    .note{
      color:var(--muted);
      font-size:13px;
      padding:10px 12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      border-radius:12px;
      flex:1;
      min-width:260px;
    }

    .card{
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-radius:16px;
      box-shadow: var(--shadow);
      padding:16px;
      max-width:900px;
      margin: 0 auto;
    }

    .bannerWrap{
      max-width:900px;
      margin: 14px auto 0;
      display:flex;
      justify-content:center;
    }
    .banner{
      width: 100%;
      max-width: 900px;
      border-radius:16px;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      overflow:hidden;
      background: rgba(255,255,255,.02);
    }
    .banner img{display:block;width:100%;height:auto}

    .qhead{
      display:flex;align-items:flex-start;justify-content:space-between;gap:10px;flex-wrap:wrap;
      margin-bottom:12px;
    }
    .qnum{
      font-weight:900;color:var(--accent);
      background: rgba(122,167,255,.10);
      border:1px solid rgba(122,167,255,.20);
      padding:6px 10px;border-radius:999px;
      white-space:nowrap;
    }
    .qtext{margin:0;font-size:18px;line-height:1.35;flex:1;min-width:260px}
    .qmeta{
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
      padding:6px 10px;border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
    }

    .opts{display:grid;gap:10px;margin-top:10px}
    .opt{
      text-align:left;
      padding:14px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(15,23,48,.45);
      color:var(--text);
      font-weight:800;
      transition: transform .05s ease, background .15s ease, border-color .15s ease, opacity .15s ease;
      user-select:none;
    }
    .opt:hover{border-color: rgba(122,167,255,.35)}
    .opt:active{transform: translateY(1px)}
    .opt.correct{background: rgba(39,209,124,.18);border-color: rgba(39,209,124,.55)}
    .opt.wrong{background: rgba(255,77,77,.16);border-color: rgba(255,77,77,.55)}
    .opt.revealCorrect{background: rgba(255,211,110,.18);border-color: rgba(255,211,110,.65)}
    .opt.locked{opacity:.92;cursor:not-allowed}

    /* ‚úÖ Modus 3: Auswahl blau */
    .opt.selected{
      background: rgba(79,179,255,.14);
      border-color: rgba(79,179,255,.45);
      box-shadow: 0 0 0 4px rgba(79,179,255,.10);
    }

    .foot{
      margin-top:12px;
      color:var(--muted);
      font-size:12px;
      display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;
      align-items:center;
    }
    .badge{
      padding:6px 10px;border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      white-space:nowrap;
    }

    .fadeOut{opacity:0; transform: translateY(6px); transition: opacity .22s ease, transform .22s ease;}
    .fadeIn{opacity:1; transform: translateY(0); transition: opacity .22s ease, transform .22s ease;}

    /* Startscreen kompakt */
    .rulesLead{
      margin:0 0 10px 0;
      color:var(--muted);
      line-height:1.4;
      font-size:13px;
    }
    .rulesSection{
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      border-radius:14px;
      padding:10px;
      margin-top:8px;
    }
    .rulesSection h3{
      margin:0 0 6px 0;
      font-size:13px;
      font-weight:900;
    }
    .rulesSection p{
      margin:0;
      color:var(--muted);
      line-height:1.45;
      font-size:12.5px;
    }
    .rulesList{
      margin:6px 0 0 0;
      padding:0 0 0 18px;
      color:var(--muted);
      line-height:1.45;
      font-size:12.5px;
    }
    .startRow{
      display:flex;
      justify-content:flex-end;
      margin-top:10px;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .startBtn{
      background: linear-gradient(180deg, rgba(39,209,124,.30), rgba(39,209,124,.12));
      border:1px solid rgba(39,209,124,.35);
    }

    /* Modus Auswahl */
    .modeReqBox{
      border-radius:14px;
      padding:10px;
      margin-top:8px;
      border:1px solid rgba(255,107,107,.35);
      background:
        radial-gradient(700px 160px at 0% 0%, rgba(255,107,107,.14), transparent 55%),
        rgba(0,0,0,.14);
      box-shadow: var(--shadow);
    }
    .modeReqHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .modeReqTitle{
      margin:0;
      font-weight:1000;
      letter-spacing:.2px;
      font-size:13px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .reqBadge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,107,107,.45);
      background: rgba(255,107,107,.10);
      font-weight:1000;
      font-size:12px;
      white-space:nowrap;
    }
    .reqBadge::before{content:"‚ö†Ô∏è";}
    .modeHelp{
      color:var(--muted);
      font-size:12.5px;
      line-height:1.35;
      margin:0;
    }
    .modeError{
      margin-top:8px;
      display:none;
      color:#ffe3e3;
      font-size:12.5px;
      border-left:3px solid rgba(255,107,107,.65);
      padding:8px 10px;
      background: rgba(255,107,107,.08);
      border-radius:10px;
    }
    .modeError.show{display:block;}

    .modeWrap{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width:980px){ .modeWrap{grid-template-columns:1fr;} }

    .modeOption{
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      padding:10px;
      display:flex;
      gap:10px;
      align-items:flex-start;
      cursor:pointer;
      user-select:none;
      transition: transform .06s ease, border-color .15s ease, background .15s ease;
      position:relative;
      overflow:hidden;
    }
    .modeOption:hover{border-color: rgba(255,255,255,.22)}
    .modeOption:active{transform: translateY(1px)}
    .modeOption::after{
      content:"";
      position:absolute;
      inset:-40px;
      background: radial-gradient(220px 120px at 20% 20%, rgba(122,167,255,.14), transparent 55%);
      opacity:.9;
      pointer-events:none;
    }
    .modeOption.selected{
      border-color: rgba(255,107,107,.45);
      background:
        radial-gradient(500px 160px at 0% 0%, rgba(255,107,107,.12), transparent 60%),
        rgba(0,0,0,.16);
    }

    .modeRadio{
      appearance:none;
      -webkit-appearance:none;
      width:18px;height:18px;border-radius:999px;
      border:2px solid rgba(255,255,255,.25);
      background: rgba(0,0,0,.25);
      margin-top:2px;
      flex:0 0 auto;
      position:relative;
      z-index:1;
    }
    .modeRadio:checked{
      border-color: rgba(122,167,255,.55);
      box-shadow: 0 0 0 4px rgba(122,167,255,.12);
    }
    .modeRadio:checked::before{
      content:"";
      position:absolute;
      inset:4px;
      border-radius:999px;
      background: var(--accent);
    }
    .modeBody{position:relative; z-index:1;}
    .modeTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .modeTitle{
      font-weight:1000;
      font-size:13px;
      margin:0;
    }
    .modeChip{
      font-size:12px;
      font-weight:900;
      padding:5px 9px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color:var(--muted);
      white-space:nowrap;
    }
    .modeDesc{
      margin:6px 0 0 0;
      color:var(--muted);
      font-size:12.5px;
      line-height:1.35;
    }

    /* Buttons unter Antworten (Modus 2/3) */
    .actionRow{
      margin-top:12px;
      display:flex;
      justify-content:flex-end;
      gap:10px;
      flex-wrap:wrap;
    }
    .revealBtn{
      background: linear-gradient(180deg, rgba(39,209,124,.35), rgba(39,209,124,.14));
      border:1px solid rgba(39,209,124,.40);
      padding:12px 14px;
      border-radius:14px;
      font-weight:1000;
    }
    .nextBtn{
      background: linear-gradient(180deg, rgba(39,209,124,.22), rgba(39,209,124,.10));
      border:1px solid rgba(39,209,124,.30);
      padding:12px 14px;
      border-radius:14px;
      font-weight:1000;
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="topbar">
        <div class="madeby">Made by ryxii</div>

        <div class="titleblock">
          <h1>WAVEBOYS QUIZ</h1>
          <div class="subtitle">Nur 1 Frage gleichzeitig: beantworten ‚Üí n√§chste kommt automatisch.</div>
        </div>

        <div class="stats">
          <div class="pill"><span class="dot time"></span> Zeit: <span id="timer">00:00</span></div>
          <div class="pill"><span class="dot good"></span> Richtig: <span id="correctQ">0</span></div>
          <div class="pill"><span class="dot bad"></span> Falsch: <span id="wrongQ">0</span></div>
          <div class="pill"><span class="dot rem"></span> √úbrig: <span id="remainingQ">85</span></div>
          <div class="bar" aria-label="Fortschritt">
            <div class="seg good" id="segGood" style="width:0%"></div>
            <div class="seg bad"  id="segBad"  style="width:0%"></div>
            <div class="seg rem"  id="segRem"  style="width:100%"></div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="wrap">
      <div class="controls">
        <div class="note">
          <b>Hinweis:</b> Bei Mehrfachauswahl steht in der Frage, wie viele Antworten richtig sind.
          Du klickst genau so viele Optionen ‚Äì danach geht‚Äôs automatisch weiter.
        </div>
        <button id="resetBtn" type="button">Reset</button>
      </div>

      <div id="stage" class="fadeIn"></div>

      <div class="bannerWrap" aria-label="Banner">
        <div class="banner">
          <img alt="Banner" src="data:image/jpeg;base64," />
        </div>
      </div>
    </div>
  </main>

  <script>
    // ‚úÖ Ergebnis-Anzeigezeit: 1,4 Sekunden
    const RESULT_DELAY_MS = 1400;

    // ‚úÖ Timer
    const timerEl = document.getElementById("timer");
    let timerStartMs = null;
    let timerInterval = null;
    let timerEndMs = null;

    function pad2(n){ return String(n).padStart(2,"0"); }
    function formatDuration(ms){
      const totalSec = Math.max(0, Math.floor(ms / 1000));
      const m = Math.floor(totalSec / 60);
      const s = totalSec % 60;
      return `${pad2(m)}:${pad2(s)}`;
    }
    function updateTimerUI(){
      if (timerStartMs === null) { timerEl.textContent = "00:00"; return; }
      timerEl.textContent = formatDuration(Date.now() - timerStartMs);
    }
    function startTimer(){
      timerStartMs = Date.now();
      timerEndMs = null;
      updateTimerUI();
      if (timerInterval) clearInterval(timerInterval);
      timerInterval = setInterval(updateTimerUI, 250);
    }
    function stopTimer(){
      if (timerStartMs === null) return;
      timerEndMs = Date.now();
      updateTimerUI();
      if (timerInterval) clearInterval(timerInterval);
      timerInterval = null;
    }
    function getFinalTimeText(){
      if (timerStartMs === null) return "00:00";
      const end = timerEndMs ?? Date.now();
      return formatDuration(end - timerStartMs);
    }

    // ‚úÖ Modi:
    // "auto"  = auswerten + nach 1,4s automatisch weiter
    // "next"  = auswerten sofort, aber weiter erst mit Button
    // "review"= ausw√§hlen/√§ndern (blau) -> Frage aufl√∂sen -> N√§chste Frage
    let advanceMode = null;

    function shuffleArray(arr){
      for (let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // ======= DEINE FRAGEN (85) =======
    const QUESTIONS = [
      // ===== GEOGRAPHIE (20) =====
      { q: "Was ist die Hauptstadt von Kanada?", options: ["Toronto","Ottawa","Montreal","Vancouver"], correct: [1] },
      { q: "Was ist die Hauptstadt von Australien?", options: ["Sydney","Melbourne","Canberra","Perth"], correct: [2] },
      { q: "Was ist die Hauptstadt von Brasilien?", options: ["Rio de Janeiro","S√£o Paulo","Bras√≠lia","Salvador"], correct: [2] },
      { q: "Was ist die Hauptstadt der T√ºrkei?", options: ["Istanbul","Ankara","Izmir","Bursa"], correct: [1] },
      { q: "Was ist die Hauptstadt von S√ºdafrika (Regierungssitz)?", options: ["Kapstadt","Johannesburg","Pretoria","Durban"], correct: [2] },
      { q: "Welche Stadt ist Hauptstadt der Schweiz?", options: ["Z√ºrich","Bern","Genf","Basel"], correct: [1] },
      { q: "Welche Stadt ist Hauptstadt der Niederlande?", options: ["Den Haag","Amsterdam","Rotterdam","Utrecht"], correct: [1] },
      { q: "Welche Stadt ist Hauptstadt von Neuseeland?", options: ["Auckland","Wellington","Christchurch","Hamilton"], correct: [1] },
      { q: "Welche Stadt ist Hauptstadt von Indien?", options: ["Mumbai","Neu-Delhi","Bengaluru","Kolkata"], correct: [1] },
      { q: "Welche Stadt ist Hauptstadt von Japan?", options: ["Osaka","Kyoto","Tokio","Nagoya"], correct: [2] },
      { q: "Welcher Fluss flie√üt durch Paris?", options: ["Seine","Rhone","Loire","Garonne"], correct: [0] },
      { q: "Welcher Fluss flie√üt durch Rom?", options: ["Po","Tiber","Arno","Etsch"], correct: [1] },
      { q: "Welcher Ozean liegt √∂stlich von Afrika?", options: ["Atlantik","Indischer Ozean","Pazifik","Arktischer Ozean"], correct: [1] },
      { q: "In welchem Land liegt die Stadt Marrakesch?", options: ["Tunesien","Marokko","Algerien","√Ñgypten"], correct: [1] },
      { q: "Welche Gebirgskette trennt Spanien und Frankreich?", options: ["Alpen","Pyren√§en","Karpaten","Apennin"], correct: [1] },
      { q: "Wie hei√üt der h√∂chste Berg Europas (nach g√§ngiger Elbrus-Definition)?", options: ["Mont Blanc","Elbrus","Matterhorn","Dufourspitze"], correct: [1] },
      { q: "Welche Insel ist fl√§chenm√§√üig die gr√∂√üte der Welt?", options: ["Gr√∂nland","Borneo","Madagaskar","Neuguinea"], correct: [0] },
      { q: "Welche Stadt ist Hauptstadt von Norwegen?", options: ["Bergen","Oslo","Trondheim","Stavanger"], correct: [1] },
      { q: "Welche Stadt ist Hauptstadt von Polen?", options: ["Krakau","Warschau","Danzig","Breslau"], correct: [1] },
      { q: "Welche Stadt ist Hauptstadt von Griechenland?", options: ["Thessaloniki","Athen","Patras","Heraklion"], correct: [1] },

      // ===== HISTORIE (20) =====
      { q: "In welchem Jahr fiel die Berliner Mauer?", options: ["1987","1989","1991","1993"], correct: [1] },
      { q: "Wer war der erste Bundeskanzler der Bundesrepublik Deutschland?", options: ["Willy Brandt","Konrad Adenauer","Helmut Schmidt","Ludwig Erhard"], correct: [1] },
      { q: "Welche antike Stadt wurde im Jahr 79 n. Chr. durch den Vesuv versch√ºttet?", options: ["Karthago","Pompeji","Athen","Sparta"], correct: [1] },
      { q: "Welche Kultur baute die Pyramiden von Gizeh?", options: ["R√∂mer","√Ñgypter","Griechen","Perser"], correct: [1] },
      { q: "Wer war der ber√ºhmte makedonische Eroberer des Altertums?", options: ["Julius Caesar","Alexander der Gro√üe","Hannibal","Augustus"], correct: [1] },
      { q: "In welchem Jahr begann der Erste Weltkrieg?", options: ["1912","1914","1916","1918"], correct: [1] },
      { q: "In welchem Jahr endete der Zweite Weltkrieg in Europa?", options: ["1944","1945","1946","1947"], correct: [1] },
      { q: "Welche Revolution begann 1789?", options: ["Industrielle Revolution","Franz√∂sische Revolution","Russische Revolution","Amerikanische Revolution"], correct: [1] },
      { q: "Wer war der erste Mensch auf dem Mond?", options: ["Buzz Aldrin","Neil Armstrong","Yuri Gagarin","Michael Collins"], correct: [1] },
      { q: "Welches Reich hatte Konstantinopel als Hauptstadt?", options: ["R√∂misches Reich","Byzantinisches Reich","Osmanisches Reich","Persisches Reich"], correct: [1] },
      { q: "Welche ber√ºhmte Handelsstra√üe verband Europa und Asien?", options: ["Bernsteinstra√üe","Seidenstra√üe","K√∂nigsweg","Via Appia"], correct: [1] },
      { q: "Welches Ereignis markiert oft das Ende des Mittelalters (klassisch)?", options: ["V√∂lkerwanderung","Entdeckung Amerikas 1492","Reichsgr√ºndung 1871","Wiener Kongress"], correct: [1] },
      { q: "Wer schrieb 'Die Odyssee' (zugeschrieben)?", options: ["Sophokles","Homer","Platon","Aristoteles"], correct: [1] },
      { q: "Mehrfachauswahl: 2 richtig ‚Äì Welche geh√∂rten zu den Achsenm√§chten im Zweiten Weltkrieg?", options: ["Deutschland","Italien","Frankreich","Kanada"], correct: [0,1] },
      { q: "Welche Stadt war im Kalten Krieg geteilt?", options: ["M√ºnchen","Berlin","Hamburg","Wien"], correct: [1] },
      { q: "Wer war der erste Pr√§sident der USA?", options: ["Abraham Lincoln","George Washington","Thomas Jefferson","John Adams"], correct: [1] },
      { q: "Die 'Magna Carta' wurde in welchem Land unterzeichnet?", options: ["Frankreich","England","Spanien","Italien"], correct: [1] },
      { q: "Welches Reich wurde 1453 erobert (Fall Konstantinopels)?", options: ["Byzantinisches Reich","R√∂misches Reich","Persisches Reich","Heiliges R√∂misches Reich"], correct: [0] },
      { q: "Welche Epoche folgte direkt auf die Antike?", options: ["Renaissance","Mittelalter","Aufkl√§rung","Barock"], correct: [1] },
      { q: "Welche deutsche Stadt war lange Regierungssitz der BRD (vor Berlin)?", options: ["Berlin","Bonn","Frankfurt","Leipzig"], correct: [1] },

      // ===== ALLGEMEINWISSEN (38) =====
      { q: "Wie viele Kontinente gibt es (klassisch)?", options: ["5","6","7","8"], correct: [2] },
      { q: "Welcher Planet ist der Sonne am n√§chsten?", options: ["Venus","Merkur","Mars","Erde"], correct: [1] },
      { q: "Welches Element hat das chemische Symbol 'O'?", options: ["Gold","Osmium","Sauerstoff","Zinn"], correct: [2] },
      { q: "Welches Tier ist das gr√∂√üte lebende S√§ugetier?", options: ["Afrikanischer Elefant","Blauwal","Giraffe","Orca"], correct: [1] },
      { q: "Welche Einheit misst elektrische Stromst√§rke?", options: ["Volt","Ampere","Watt","Ohm"], correct: [1] },
      { q: "Wer schrieb 'Faust'?", options: ["Schiller","Goethe","Kafka","Brecht"], correct: [1] },
      { q: "Welche Sprache hat die meisten Muttersprachler weltweit (typisch gez√§hlt)?", options: ["Englisch","Spanisch","Mandarin-Chinesisch","Hindi"], correct: [2] },
      { q: "Was ist die chemische Formel von Wasser?", options: ["CO2","H2O","O2","NaCl"], correct: [1] },
      { q: "Welche Blutgruppe gilt als Universalspender (vereinfacht, ohne Rhesusfaktor)?", options: ["A","B","AB","0"], correct: [3] },
      { q: "Was ist die h√§rteste nat√ºrliche Substanz?", options: ["Quarz","Diamant","Granit","Stahl"], correct: [1] },
      { q: "Welches Organ filtert Blut und produziert Urin?", options: ["Leber","Niere","Lunge","Magen"], correct: [1] },
      { q: "Was bedeutet 'WWW'?", options: ["World Wide Web","Wireless Web World","Wide World Wire","World Web Window"], correct: [0] },
      { q: "Welche Farbe entsteht aus Blau und Gelb?", options: ["Gr√ºn","Orange","Lila","Braun"], correct: [0] },
      { q: "Wie viele Grad hat ein rechter Winkel?", options: ["45","90","120","180"], correct: [1] },
      { q: "Welches Land ist bekannt f√ºr das Kolosseum?", options: ["Griechenland","Italien","Spanien","T√ºrkei"], correct: [1] },
      { q: "Mehrfachauswahl: 2 richtig ‚Äì Welche sind Programmiersprachen?", options: ["Python","HTML","Java","CSS"], correct: [0,2] },
      { q: "Was ist ein Synonym f√ºr 'pr√§zise'?", options: ["vage","exakt","chaotisch","unklar"], correct: [1] },
      { q: "Welche W√§hrung hat Japan?", options: ["Yuan","Won","Yen","Ringgit"], correct: [2] },
      { q: "Welche Stadt ist Hauptstadt von Frankreich?", options: ["Marseille","Paris","Lyon","Nizza"], correct: [1] },
      { q: "Welche Stadt ist Hauptstadt von Spanien?", options: ["Barcelona","Madrid","Valencia","Sevilla"], correct: [1] },

      { q: "Welcher Staat ist fl√§chenm√§√üig der gr√∂√üte der Welt?", options: ["Kanada","China","USA","Russland"], correct: [3] },
      { q: "Was ist das chemische Symbol f√ºr Natrium?", options: ["Na","N","Nt","Nr"], correct: [0] },
      { q: "Welches Gas ist der Hauptbestandteil der Erdatmosph√§re?", options: ["Sauerstoff","Kohlendioxid","Stickstoff","Argon"], correct: [2] },
      { q: "Welche Einheit wird f√ºr elektrische Leistung verwendet?", options: ["Volt","Watt","Ampere","Ohm"], correct: [1] },
      { q: "Welcher Knochen ist der l√§ngste im menschlichen K√∂rper?", options: ["Schienbein","Oberarmknochen","Oberschenkelknochen","Becken"], correct: [2] },
      { q: "Wie hei√üt der gr√∂√üte Planet unseres Sonnensystems?", options: ["Saturn","Jupiter","Neptun","Uranus"], correct: [1] },
      { q: "Welches Land geh√∂rt NICHT zu den Benelux-Staaten?", options: ["Belgien","Niederlande","Luxemburg","D√§nemark"], correct: [3] },
      { q: "Was bedeutet die Abk√ºrzung 'LED'?", options: ["Light Emitting Diode","Long Energy Device","Laser Emitting Display","Light Energy Driver"], correct: [0] },
      { q: "Welche Vitamine werden bei Sonneneinstrahlung in der Haut gebildet?", options: ["Vitamin A","Vitamin C","Vitamin D","Vitamin K"], correct: [2] },
      { q: "Welcher Begriff passt: DNA steht f√ºr ‚Ä¶", options: ["Desoxyribonukleins√§ure","Dynamische Nuklein-Analyse","Doppel-Nitrogen-Acid","Desoxynitro-Amin"], correct: [0] },
      { q: "Welche Stadt gilt als Sitz der EU-Kommission?", options: ["Stra√üburg","Br√ºssel","Luxemburg","Frankfurt"], correct: [1] },
      { q: "Wie nennt man die Lehre von den Sternbildern/Planetenbahnen allgemein?", options: ["Geologie","Astronomie","Biologie","Meteorologie"], correct: [1] },
      { q: "Welche Aussage ist richtig zur Photosynthese?", options: ["Sie verbraucht Sauerstoff und erzeugt CO‚ÇÇ","Sie erzeugt Zucker aus Licht, CO‚ÇÇ und Wasser","Sie findet nur nachts statt","Sie passiert nur bei Tieren"], correct: [1] },
      { q: "Mehrfachauswahl: 2 richtig ‚Äì Welche z√§hlen zu erneuerbaren Energien?", options: ["Windkraft","Erd√∂l","Solarenergie","Kohle"], correct: [0,2] },
      { q: "Welcher Kontinent hat die meisten L√§nder?", options: ["Europa","Afrika","Asien","S√ºdamerika"], correct: [1] },
      { q: "Was bezeichnet man als 'pH-Wert' am ehesten?", options: ["Temperatur einer L√∂sung","S√§uregrad einer L√∂sung","Druck in einem Gef√§√ü","Lichtst√§rke"], correct: [1] },
      { q: "Welche Einheit entspricht 1 Newton?", options: ["kg¬∑m/s¬≤","kg/s","m/s¬≤","N ist dimensionslos"], correct: [0] },
      { q: "Welche Aussage trifft auf 'Inflation' am ehesten zu?", options: ["Allgemeines Sinken der Preise","Allgemeines Steigen des Preisniveaus","Mehr Exporte als Importe","Sinkender Leitzins"], correct: [1] },

      // ===== MATHE (7) =====
      { q: "Rechnung: 15% von 240 = ?", options: ["24","30","36","48"], correct: [2] },
      { q: "Rechnung: (48 √∑ 6) √ó (14 ‚àí 9) = ?", options: ["30","35","40","45"], correct: [3] },
      { q: "Rechnung: 7,5 √ó 1,2 = ?", options: ["8,4","8,7","9,0","9,2"], correct: [2] },
      { q: "Rechnung: 3/5 von 250 = ?", options: ["120","140","150","160"], correct: [2] },
      { q: "Rechnung: (1200 √∑ 3) √∑ 8 = ?", options: ["40","50","60","70"], correct: [1] },
      { q: "Rechnung: Eine Strecke ist 180 km. Bei 90 km/h ‚Äì wie lange?", options: ["1 h","1 h 30 min","2 h","2 h 30 min"], correct: [2] },
      { q: "Welche Zahl setzt die Reihe fort: 3, 6, 12, 24, ...", options: ["30","36","42","48"], correct: [3] },
    ];

    const stage = document.getElementById("stage");
    const correctQEl = document.getElementById("correctQ");
    const wrongQEl = document.getElementById("wrongQ");
    const remainingQEl = document.getElementById("remainingQ");
    const segGood = document.getElementById("segGood");
    const segBad  = document.getElementById("segBad");
    const segRem  = document.getElementById("segRem");

    let correctQuestions = 0;
    let wrongQuestions = 0;
    let currentIndex = 0;
    let busy = false;

    // Mode Buttons (f√ºr Modus 2/3)
    let revealBtnRef = null;
    let nextBtnRef = null;
    let pendingAdvance = false;

    const perQ = QUESTIONS.map(q => ({
      locked:false,
      picks:[],
      required:q.correct.length,
      order:null,
      correctShuffled:null
    }));

    function updateTop(){
      correctQEl.textContent = String(correctQuestions);
      wrongQEl.textContent = String(wrongQuestions);

      const answered = correctQuestions + wrongQuestions;
      const remaining = QUESTIONS.length - answered;
      remainingQEl.textContent = String(remaining);

      const total = QUESTIONS.length;
      const goodPct = (correctQuestions / total) * 100;
      const badPct  = (wrongQuestions / total) * 100;
      const remPct  = 100 - goodPct - badPct;

      segGood.style.width = goodPct + "%";
      segBad.style.width  = badPct + "%";
      segRem.style.width  = remPct + "%";
    }

    function renderStartScreen(){
      stage.innerHTML = "";
      stage.classList.remove("fadeOut");
      stage.classList.add("fadeIn");

      advanceMode = null;

      const card = document.createElement("div");
      card.className = "card";

      const head = document.createElement("div");
      head.className = "qhead";

      const qnum = document.createElement("div");
      qnum.className = "qnum";
      qnum.textContent = "Start";

      const title = document.createElement("p");
      title.className = "qtext";
      title.innerHTML = "<b>üéâ Willkommen beim Quiz!</b>";

      const meta = document.createElement("div");
      meta.className = "qmeta";
      meta.textContent = "Regeln";

      head.appendChild(qnum);
      head.appendChild(title);
      head.appendChild(meta);

      const lead = document.createElement("p");
      lead.className = "rulesLead";
      lead.textContent = "Bitte lies dir die Hinweise kurz durch, bevor du startest üëá";

      const s1 = document.createElement("div");
      s1.className = "rulesSection";
      s1.innerHTML = `
        <h3>üìù So funktioniert‚Äôs</h3>
        <ul class="rulesList">
          <li><span style="color:var(--good);font-weight:900;">üü¢ Gr√ºn</span> = richtig</li>
          <li><span style="color:var(--bad);font-weight:900;">üî¥ Rot</span> = falsch</li>
          <li>‚Üí <span style="color:var(--gold);font-weight:900;">üü° Gelb</span> zeigt die richtige L√∂sung</li>
        </ul>
      `;

      const s2 = document.createElement("div");
      s2.className = "rulesSection";
      s2.innerHTML = `
        <h3>‚úÖ Mehrfachauswahl</h3>
        <p>Wenn mehrere Antworten richtig sind, steht das oben im Titel. Bitte alle richtigen ausw√§hlen.</p>
      `;

      const sMode = document.createElement("div");
      sMode.className = "modeReqBox";
      sMode.innerHTML = `
        <div class="modeReqHead">
          <p class="modeReqTitle">üß© Wie sollen die Fragen kommen?</p>
          <span class="reqBadge">Pflicht</span>
        </div>
        <p class="modeHelp">Bitte w√§hle eine Option aus. Ohne Auswahl kannst du nicht starten.</p>

        <div class="modeWrap">
          <label class="modeOption" data-mode="auto">
            <input class="modeRadio" type="radio" name="mode" value="auto">
            <div class="modeBody">
              <div class="modeTop">
                <p class="modeTitle">Modus 1: Auto-Weiter</p>
                <span class="modeChip">Schnell</span>
              </div>
              <p class="modeDesc">Auswertung ‚Üí nach <b>${Math.round(RESULT_DELAY_MS/100)/10}s</b> automatisch weiter.</p>
            </div>
          </label>

          <label class="modeOption" data-mode="next">
            <input class="modeRadio" type="radio" name="mode" value="next">
            <div class="modeBody">
              <div class="modeTop">
                <p class="modeTitle">Modus 2: Mit ‚ÄûN√§chste Frage‚Äú</p>
                <span class="modeChip">Kontrolliert</span>
              </div>
              <p class="modeDesc">Auswertung sofort, aber weiter erst mit Button <b>N√§chste Frage</b>.</p>
            </div>
          </label>

          <label class="modeOption" data-mode="review">
            <input class="modeRadio" type="radio" name="mode" value="review">
            <div class="modeBody">
              <div class="modeTop">
                <p class="modeTitle">Modus 3: Aufl√∂sen</p>
                <span class="modeChip">Ausw√§hlen & √§ndern</span>
              </div>
              <p class="modeDesc">Du kannst frei w√§hlen/√§ndern (blau) ‚Üí <b>Frage aufl√∂sen</b> ‚Üí <b>N√§chste Frage</b>.</p>
            </div>
          </label>
        </div>

        <div id="modeError" class="modeError">Bitte w√§hle erst eine Option aus, um zu starten.</div>
      `;

      const s3 = document.createElement("div");
      s3.className = "rulesSection";
      s3.innerHTML = `
        <h3>üí¨ Feedback</h3>
        <p>Fragen oder Verbesserungen? Schreib mir auf Discord: <b>ryxii</b>.</p>
      `;

      const actions = document.createElement("div");
      actions.className = "startRow";

      const startBtn = document.createElement("button");
      startBtn.className = "startBtn";
      startBtn.type = "button";
      startBtn.textContent = "Starten ‚Üí";
      startBtn.disabled = true;

      actions.appendChild(startBtn);

      card.appendChild(head);
      card.appendChild(lead);
      card.appendChild(s1);
      card.appendChild(s2);
      card.appendChild(sMode);
      card.appendChild(s3);
      card.appendChild(actions);

      stage.appendChild(card);
      updateTop();
      updateTimerUI();
      window.scrollTo({top:0, behavior:"smooth"});

      const modeError = document.getElementById("modeError");
      const modeCards = [...stage.querySelectorAll(".modeOption")];
      const radios = [...stage.querySelectorAll('input[name="mode"]')];

      function setSelected(mode){
        modeCards.forEach(c => c.classList.toggle("selected", c.getAttribute("data-mode") === mode));
      }
      function enableStartIfValid(){
        const picked = stage.querySelector('input[name="mode"]:checked');
        if (picked){
          advanceMode = picked.value;
          setSelected(advanceMode);
          startBtn.disabled = false;
          modeError.classList.remove("show");
        } else {
          advanceMode = null;
          setSelected(null);
          startBtn.disabled = true;
        }
      }

      radios.forEach(r => r.addEventListener("change", enableStartIfValid));
      modeCards.forEach(cardEl => {
        cardEl.addEventListener("click", () => {
          const r = cardEl.querySelector('input[type="radio"]');
          if (!r) return;
          r.checked = true;
          r.dispatchEvent(new Event("change", {bubbles:true}));
        });
      });

      startBtn.addEventListener("click", () => {
        if (!advanceMode){
          modeError.classList.add("show");
          return;
        }
        startTimer();
        renderCurrent();
      });

      enableStartIfValid();
    }

    function renderCurrent(){
      stage.innerHTML = "";
      stage.classList.remove("fadeOut");
      stage.classList.add("fadeIn");

      revealBtnRef = null;
      nextBtnRef = null;
      pendingAdvance = false;

      if (currentIndex >= QUESTIONS.length){
        stopTimer();
        renderEndScreen();
        updateTop();
        return;
      }

      const item = QUESTIONS[currentIndex];
      const st = perQ[currentIndex];

      const order = shuffleArray([...Array(item.options.length).keys()]);
      st.order = order;

      st.correctShuffled = [];
      for (let newIdx = 0; newIdx < order.length; newIdx++){
        const originalIdx = order[newIdx];
        if (item.correct.includes(originalIdx)) st.correctShuffled.push(newIdx);
      }

      const card = document.createElement("div");
      card.className = "card";

      const qhead = document.createElement("div");
      qhead.className = "qhead";

      const qnum = document.createElement("div");
      qnum.className = "qnum";
      qnum.textContent = `Frage ${currentIndex+1}/${QUESTIONS.length}`;

      const qtext = document.createElement("p");
      qtext.className = "qtext";
      qtext.textContent = item.q;

      const meta = document.createElement("div");
      meta.className = "qmeta";
      meta.textContent = item.correct.length > 1
        ? `Mehrfachauswahl: ${item.correct.length} richtig`
        : "Einfachauswahl: 1 richtig";

      qhead.appendChild(qnum);
      qhead.appendChild(qtext);
      qhead.appendChild(meta);

      const opts = document.createElement("div");
      opts.className = "opts";

      order.forEach((originalIdx, newIdx) => {
        const t = item.options[originalIdx];
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "opt";
        btn.textContent = t;
        btn.addEventListener("click", () => handlePick(newIdx, btn, opts));
        opts.appendChild(btn);
      });

      const foot = document.createElement("div");
      foot.className = "foot";

      const b1 = document.createElement("div");
      b1.className = "badge";
      b1.textContent = `Richtige Antworten: ${item.correct.length}`;

      const b2 = document.createElement("div");
      b2.className = "badge";
      b2.textContent = `Ausgew√§hlt: ${st.picks.length}/${st.required}`;

      foot.appendChild(b1);
      foot.appendChild(b2);

      card.appendChild(qhead);
      card.appendChild(opts);
      card.appendChild(foot);

      // ‚úÖ Modus 2 & 3: Buttons unten
      if (advanceMode === "next" || advanceMode === "review"){
        const actionRow = document.createElement("div");
        actionRow.className = "actionRow";

        if (advanceMode === "review"){
          const revealBtn = document.createElement("button");
          revealBtn.type = "button";
          revealBtn.className = "revealBtn";
          revealBtn.textContent = "Frage aufl√∂sen ‚úÖ";
          revealBtn.disabled = true;
          revealBtn.addEventListener("click", () => {
            if (busy) return;
            if (st.locked) return;
            if (st.picks.length < st.required) return;
            evaluateQuestion(opts);
          });
          revealBtnRef = revealBtn;
          actionRow.appendChild(revealBtn);
        }

        const nextBtn = document.createElement("button");
        nextBtn.type = "button";
        nextBtn.className = "nextBtn";
        nextBtn.textContent = "N√§chste Frage ‚Üí";
        nextBtn.disabled = true;
        nextBtn.addEventListener("click", () => {
          if (!pendingAdvance) return;
          goNextQuestion();
        });
        nextBtnRef = nextBtn;

        actionRow.appendChild(nextBtn);
        card.appendChild(actionRow);
      }

      stage.appendChild(card);
      updateTop();

      // Modus 3: Reveal aktivieren wenn genug ausgew√§hlt
      if (advanceMode === "review" && revealBtnRef){
        revealBtnRef.disabled = !(st.picks.length >= st.required);
      }
    }

    function lockButtons(optsDiv){
      [...optsDiv.querySelectorAll(".opt")].forEach(b => b.classList.add("locked"));
    }

    function revealCorrectAnswers(optsDiv, correctNow){
      const btns = [...optsDiv.querySelectorAll(".opt")];
      correctNow.forEach(idx => {
        const b = btns[idx];
        if (!b) return;
        if (!b.classList.contains("correct")) b.classList.add("revealCorrect");
      });
    }

    function goNextQuestion(){
      stage.classList.remove("fadeIn");
      stage.classList.add("fadeOut");

      setTimeout(() => {
        currentIndex += 1;
        busy = false;
        renderCurrent();
      }, 250);
    }

    function evaluateQuestion(optsDiv){
      const item = QUESTIONS[currentIndex];
      const st = perQ[currentIndex];
      const correctNow = st.correctShuffled || item.correct;

      const picksSorted = [...st.picks].sort((a,b)=>a-b).join(",");
      const corrSorted  = [...correctNow].sort((a,b)=>a-b).join(",");
      const exactMatch = (picksSorted === corrSorted);

      // Buttons einf√§rben
      const btns = [...optsDiv.querySelectorAll(".opt")];

      if (advanceMode === "review"){
        // Im Review-Modus: erst jetzt rot/gr√ºn setzen
        btns.forEach((b, idx) => {
          if (st.picks.includes(idx)){
            if (correctNow.includes(idx)) b.classList.add("correct");
            else b.classList.add("wrong");
          }
          b.classList.remove("selected");
          b.classList.add("locked");
        });
      } else {
        // Modus 2: war schon bei Klick rot/gr√ºn ‚Äî hier nur locken
        btns.forEach(b => b.classList.add("locked"));
      }

      if (exactMatch) correctQuestions += 1;
      else {
        wrongQuestions += 1;
        revealCorrectAnswers(optsDiv, correctNow);
      }

      st.locked = true;
      updateTop();

      if (advanceMode === "auto"){
        busy = true;
        setTimeout(() => { goNextQuestion(); }, RESULT_DELAY_MS);
        return;
      }

      // Modus 2 & 3: n√§chste Frage per Button
      pendingAdvance = true;
      if (revealBtnRef) revealBtnRef.disabled = true;
      if (nextBtnRef){
        nextBtnRef.disabled = false;
        nextBtnRef.focus();
      }
    }

    function handlePick(optIndex, btnEl, optsDiv){
      const item = QUESTIONS[currentIndex];
      const st = perQ[currentIndex];
      const badges = stage.querySelectorAll(".badge");

      // ===== Modus 3: frei ausw√§hlen/√§ndern + blau markieren =====
      if (advanceMode === "review"){
        if (st.locked) return;

        const i = st.picks.indexOf(optIndex);
        if (i >= 0){
          st.picks.splice(i, 1);
          btnEl.classList.remove("selected");
        } else {
          if (st.required === 1){
            st.picks = [optIndex];
            [...optsDiv.querySelectorAll(".opt")].forEach(b => b.classList.remove("selected"));
            btnEl.classList.add("selected");
          } else {
            st.picks.push(optIndex);
            btnEl.classList.add("selected");
          }
        }

        if (badges && badges[1]) badges[1].textContent = `Ausgew√§hlt: ${st.picks.length}/${st.required}`;
        if (revealBtnRef) revealBtnRef.disabled = !(st.picks.length >= st.required);
        return;
      }

      // ===== Modus 1 & 2: wie bisher (sofort auswerten) =====
      if (busy) return;
      if (st.locked) return;
      if (st.picks.includes(optIndex)) return;

      st.picks.push(optIndex);

      const correctNow = st.correctShuffled || item.correct;
      const isCorrectNow = correctNow.includes(optIndex);

      if (isCorrectNow) btnEl.classList.add("correct");
      else btnEl.classList.add("wrong");

      if (badges && badges[1]) badges[1].textContent = `Ausgew√§hlt: ${st.picks.length}/${st.required}`;

      if (st.picks.length >= st.required){
        st.locked = true;
        lockButtons(optsDiv);

        // auswerten
        evaluateQuestion(optsDiv);

        // Modus 2: nicht automatisch weiter
        // (evaluateQuestion setzt pendingAdvance + aktiviert Next-Button)
      }
    }

    function estimateIQFromResults(correctQ, wrongQ){
      const total = correctQ + wrongQ;
      if (total <= 0) return 100;
      const accuracy = correctQ / total;
      const errorRate = wrongQ / total;
      let iq = 100 + (accuracy - 0.5) * 85;
      iq -= Math.pow(errorRate, 1.45) * 38;
      iq = Math.round(iq);
      return Math.max(70, Math.min(140, iq));
    }

    function renderEndScreen(){
      const total = QUESTIONS.length;
      const rate = total > 0 ? Math.round((correctQuestions / total) * 100) : 0;
      const iqGuess = estimateIQFromResults(correctQuestions, wrongQuestions);
      const finalTime = getFinalTimeText();

      const card = document.createElement("div");
      card.className = "card";

      const head = document.createElement("div");
      head.className = "qhead";

      const qnum = document.createElement("div");
      qnum.className = "qnum";
      qnum.textContent = `üèÅ Fertig (${total} Fragen)`;

      const title = document.createElement("p");
      title.className = "qtext";
      title.innerHTML = "<b>Du hast das Quiz erfolgreich beendet.</b>";

      const meta = document.createElement("div");
      meta.className = "qmeta";
      meta.textContent = "Auswertung";

      head.appendChild(qnum);
      head.appendChild(title);
      head.appendChild(meta);

      const hero = document.createElement("div");
      hero.style.marginTop = "10px";
      hero.style.borderRadius = "16px";
      hero.style.border = "1px solid var(--border)";
      hero.style.background =
        "radial-gradient(900px 240px at 10% 0%, rgba(79,179,255,.18), transparent 60%)," +
        "radial-gradient(900px 240px at 90% 0%, rgba(39,209,124,.12), transparent 55%)," +
        "radial-gradient(900px 240px at 70% 100%, rgba(255,77,77,.12), transparent 55%)," +
        "rgba(255,255,255,.03)";
      hero.style.padding = "14px";
      hero.style.boxShadow = "var(--shadow)";

      hero.innerHTML = `
        <div style="display:flex;gap:14px;flex-wrap:wrap;align-items:center;justify-content:space-between;">
          <div style="flex:1;min-width:240px;">
            <h2 style="margin:0 0 6px 0;font-size:22px;">‚ú® Ergebnis</h2>
            <p style="margin:0;color:var(--muted);line-height:1.45;">Richtig / Falsch + Bonus: eine (spa√üige) IQ-Umrechnung.</p>
          </div>
          <div style="width:110px;height:110px;border-radius:999px;border:1px solid var(--border);display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(0,0,0,.22);box-shadow:var(--shadow);">
            <div style="font-size:28px;font-weight:900;line-height:1;">${rate}%</div>
            <div style="font-size:12px;color:var(--muted);margin-top:6px;">Trefferquote</div>
          </div>
        </div>

        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px;">
          <div style="border:1px solid var(--border);background:rgba(255,255,255,.03);border-radius:14px;padding:12px;">
            <div style="color:var(--muted);font-size:12px;margin-bottom:6px;">Richtig</div>
            <div style="font-weight:900;font-size:22px;color:var(--good);">${correctQuestions}</div>
          </div>
          <div style="border:1px solid var(--border);background:rgba(255,255,255,.03);border-radius:14px;padding:12px;">
            <div style="color:var(--muted);font-size:12px;margin-bottom:6px;">Falsch</div>
            <div style="font-weight:900;font-size:22px;color:var(--bad);">${wrongQuestions}</div>
          </div>
          <div style="border:1px solid var(--border);background:rgba(255,255,255,.03);border-radius:14px;padding:12px;">
            <div style="color:var(--muted);font-size:12px;margin-bottom:6px;">IQ (umgerechnet)</div>
            <div style="font-weight:900;font-size:22px;">${iqGuess}</div>
          </div>
          <div style="border:1px solid var(--border);background:rgba(255,255,255,.03);border-radius:14px;padding:12px;">
            <div style="color:var(--muted);font-size:12px;margin-bottom:6px;">Fragen</div>
            <div style="font-weight:900;font-size:22px;">${total}</div>
          </div>
        </div>
      `;

      const disclaimer = document.createElement("div");
      disclaimer.style.marginTop = "10px";
      disclaimer.style.color = "var(--muted)";
      disclaimer.style.fontSize = "12px";
      disclaimer.textContent =
        "Hinweis: Diese IQ-Zahl ist nur ein Spa√ü-Wert (aus der Trefferquote abgeleitet) und kein echter IQ-Test.";

      const sig = document.createElement("div");
      sig.style.marginTop = "14px";
      sig.style.padding = "10px 12px";
      sig.style.borderRadius = "14px";
      sig.style.border = "1px dashed rgba(255,255,255,.18)";
      sig.style.background = "rgba(255,255,255,.02)";
      sig.style.fontWeight = "900";
      sig.textContent = "Lg ryxii du pic";

      const timeRow = document.createElement("div");
      timeRow.style.marginTop = "10px";
      timeRow.innerHTML = `
        <div style="display:inline-flex;align-items:center;gap:10px;padding:10px 12px;border-radius:14px;border:1px solid rgba(79,179,255,.35);background:linear-gradient(180deg, rgba(79,179,255,.20), rgba(79,179,255,.06));box-shadow:var(--shadow);font-weight:900;">
          <span style="width:12px;height:12px;border-radius:999px;background:var(--blue);box-shadow:0 0 18px rgba(79,179,255,.35);"></span>
          Zeit: <span>${finalTime}</span>
        </div>
      `;

      const actions = document.createElement("div");
      actions.className = "startRow";

      const restart = document.createElement("button");
      restart.textContent = "Nochmal spielen";
      restart.addEventListener("click", resetAll);

      actions.appendChild(restart);

      card.appendChild(head);
      card.appendChild(hero);
      card.appendChild(disclaimer);
      card.appendChild(sig);
      card.appendChild(timeRow);
      card.appendChild(actions);

      stage.appendChild(card);
      remainingQEl.textContent = "0";
      updateTop();
    }

    function resetAll(){
      correctQuestions = 0;
      wrongQuestions = 0;
      currentIndex = 0;
      busy = false;

      advanceMode = null;
      revealBtnRef = null;
      nextBtnRef = null;
      pendingAdvance = false;

      timerStartMs = null;
      timerEndMs = null;
      if (timerInterval) clearInterval(timerInterval);
      timerInterval = null;
      updateTimerUI();

      for (const st of perQ){
        st.locked = false;
        st.picks = [];
        st.order = null;
        st.correctShuffled = null;
      }

      renderStartScreen();
      updateTop();
      window.scrollTo({top:0, behavior:"smooth"});
    }

    document.getElementById("resetBtn").addEventListener("click", resetAll);

    renderStartScreen();
    updateTop();
  </script>
</body>
</html>
